(()=>{"use strict";const t=class{constructor(){this.gameBoardArray=this.createGameBoard(),this.missedAttacks=[],this.hitAttacks=[],this.ships=[]}createGameBoard(){let t=[],e=[],s=1;for(let i=1;i<11;i++){let i=1;for(let t=1;t<11;t++)e.push({row:s,col:i++,shipName:void 0,shipIndex:void 0});s++,t.push(e),e=[]}return t}getGameBoard(){return this.gameBoardArray}checkValidMove(t,e,s){return!(t<1||t+s>11||e<1||e>10)&&void 0===this.gameBoardArray[t-1][e-1].shipName}placeShip(t,e,s){if(!1===this.checkValidMove(t,e,s.length))return!1;this.ships.push(s);let i=[];if(this.gameBoardArray[t-1][e-1].shipName=s.name,i.push(this.gameBoardArray[t-1][e-1]),s.length>1)for(let a=1;a<s.length;a++)this.gameBoardArray[t-1+[a][0]][e-1].shipName=s.name,i.push(this.gameBoardArray[t-1][e-1]);return i}checkValidAttack(t,e){if(1==this.hitAttacks.includes(this.gameBoardArray[t-1][e-1])||1==this.missedAttacks.includes(this.gameBoardArray[t-1][e-1]))return!0}receiveAttack(t,e){return!0===this.checkValidAttack(t,e)?"fail":void 0!==this.gameBoardArray[t-1][e-1].shipName?(this.ships.forEach((s=>{s.name===this.gameBoardArray[t-1][e-1].shipName&&(s.hit(),!0===s.sunk&&alert("Ship sunk!"),this.hitAttacks.push(this.gameBoardArray[t-1][e-1]))})),console.log(this.hitAttacks),!0):void 0===this.gameBoardArray[t-1][e-1].shipName?(this.missedAttacks.push(this.gameBoardArray[t-1][e-1]),console.log(this.missedAttacks),!1):void 0}getMissedAttacks(){let t=[];return this.missedAttacks.forEach((e=>{const s={row:e.row[0],col:e.col};t.push(s)})),t}allShipsSunk(){let t=[];return this.ships.forEach((e=>{!0===e.sunk&&t.push(e)})),this.ships.length===t.length}},e=function(t){return{name:t,makeRandomAttack(){const t=Math.floor(10*Math.random()+1);return console.log(t),t}}},s=function(t,e){return{name:e,length:t,hits:0,sunk:!1,hit(){this.hits++,this.isSunk()},isSunk(){this.hits===t&&(this.sunk=!0)}}};!function(){document.querySelector(".name").innerHTML="Joey";const i=new e("Computer"),a=new s(5,"Carrier"),r=new s(4,"Battleship"),o=new s(3,"Cruiser"),h=new s(3,"Submarine"),c=new s(2,"Destroyer"),l=new s(5,"Carrier"),n=new s(4,"Battleship"),d=new s(3,"Cruiser"),p=new s(3,"Submarine"),u=new s(2,"Destroyer"),m=new t,A=new t,g=new class{constructor(){this.playerTiles=[],this.compTiles=[]}addTiles(t,e){const s=document.querySelector(".compboard"),i=document.querySelector(".playerboard");t.forEach((t=>{t.forEach((t=>{const e=document.createElement("div");e.classList.add("tile"),e.setAttribute("row",t.col),e.setAttribute("col",t.row),i.appendChild(e),this.playerTiles.push(e)}))})),e.forEach((t=>{t.forEach((t=>{const e=document.createElement("div");e.classList.add("tile"),e.setAttribute("col",t.row),e.setAttribute("row",t.col),s.appendChild(e),this.compTiles.push(e)}))}))}addShips(t,e){t.forEach((t=>{t.forEach((t=>{if(void 0!==t.shipName){const e=t.row,s=t.col;this.playerTiles.forEach((i=>{const a=i.getAttribute("col"),r=i.getAttribute("row");a==e&&r==s&&(i.setAttribute("shipName",t.shipName),i.classList.add("ship"))}))}}))})),e.forEach((t=>{t.forEach((t=>{if(void 0!==t.shipName){const e=t.row,s=t.col;this.compTiles.forEach((i=>{const a=i.getAttribute("col"),r=i.getAttribute("row");a==e&&r==s&&i.setAttribute("shipName",t.shipName)}))}}))}))}};m.placeShip(2,4,a),m.placeShip(7,7,r),m.placeShip(7,10,o),m.placeShip(1,1,h),m.placeShip(2,9,c),A.placeShip(4,5,l),A.placeShip(1,2,n),A.placeShip(5,8,d),A.placeShip(8,1,p),A.placeShip(1,10,u),g.addTiles(m.getGameBoard(),A.getGameBoard()),g.addShips(m.getGameBoard(),A.getGameBoard()),g.compTiles.forEach((t=>{t.addEventListener("click",(()=>{!function(t,e){const s=A.receiveAttack(t,e);if(1==s)g.compTiles.forEach((s=>{s.getAttribute("col")==t&&s.getAttribute("row")==e&&(s.classList.add("hit"),s.classList.remove("ship"))}));else if(0==s)g.compTiles.forEach((s=>{s.getAttribute("col")==t&&s.getAttribute("row")==e&&s.classList.add("miss")}));else if("fail"===s)return void alert("You have already attacked this spot! Please try again.");let a=!1;for(;!1===a;){let t=i.makeRandomAttack(),e=i.makeRandomAttack();const s=m.receiveAttack(t,e);1==s?g.playerTiles.forEach((s=>{s.getAttribute("col")==t&&s.getAttribute("row")==e&&(s.classList.add("hit"),s.classList.remove("ship"),a=!0)})):0==s&&g.playerTiles.forEach((s=>{s.getAttribute("col")==t&&s.getAttribute("row")==e&&(s.classList.add("miss"),s.classList.remove("ship"),a=!0)}))}!0===A.allShipsSunk()?(console.log(A.ships),alert("You win!")):!0===m.allShipsSunk()&&alert("Computer wins!")}(t.getAttribute("col"),t.getAttribute("row"))}))}))}()})();